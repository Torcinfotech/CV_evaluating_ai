<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI-Powered CV Screening Platform</title>

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>

  <style>
    :root{
      /* ===================== EIM COLOR GUIDELINES ===================== */
      /* Primary blues (from 04.1 Primary / 04.2 Secondary) */
      --eim-blue-900: #062c3e; /* PANTONE 303c */
      --eim-blue-700: #173847;
      --eim-blue-600: #2a4956;
      --eim-blue-550: #3e5b68;
      --eim-blue-500: #3c5b74; /* PANTONE 7699c */
      --eim-blue-400: #536e7a;
      --eim-blue-350: #546e82;
      --eim-blue-325: #667c8e;
      --eim-blue-300: #517592; /* PANTONE 5405c */
      --eim-blue-250: #65839b;
      --eim-blue-200: #748fa6;
      --eim-blue-150: #859db1;
      --eim-blue-100: #95aabb;

      /* Gold accent family (from 04.1) */
      --eim-gold-700: #be8d34;
      --eim-gold-600: #c2954d;
      --eim-gold-500: #da9402; /* 7550c */
      --eim-gold-450: #dd9c2a; /* 7510c family */
      --eim-gold-400: #e0a73d;
      --eim-gold-350: #e4b052;
      --eim-gold-300: #e9bd68;
      --eim-gold-250: #c8a05e;
      --eim-gold-200: #d0ad73;
      --eim-gold-150: #d6b883;

      /* Greys from guideline page */
      --eim-grey-500: #bab2af; /* Pantone 435c */
      --eim-grey-200: #e1d9d6; /* Cool Gray 1c */

      /* ===== Design tokens mapped to EIM ===== */
      --primary-50:  #f4f7f9;
      --primary-100: #ecf1f5;
      --primary-300: var(--eim-blue-300);
      --primary-500: var(--eim-blue-900);
      --primary-600: var(--eim-blue-700);
      --primary-700: var(--eim-blue-600);
      --primary-900: var(--eim-blue-500);

      --secondary-50:  #f7f9fb;
      --secondary-100: var(--eim-grey-200);
      --secondary-200: #e7eef3;
      --secondary-300: #d9e2e9;
      --secondary-500: var(--eim-blue-400);
      --secondary-600: var(--eim-blue-350);
      --secondary-700: var(--eim-blue-550);
      --secondary-900: var(--eim-blue-900);

      --accent-50:  #fff8ea;
      --accent-100: #fff1d2;
      --accent-400: var(--eim-gold-400);
      --accent-500: var(--eim-gold-500);

      --success-50:#f3fbf7; --success-200:#d8f0e4; --success-500:#1E9B68; --success-600:#157954;
      --error-50:#fef2f2; --error-200:#f8d6d6; --error-500:#D94A4A; --error-600:#B83C3C;

      /* Brand gradients */
      --gradient-primary: linear-gradient(135deg, var(--eim-blue-900) 0%, var(--eim-blue-500) 100%);
      --gradient-surface: linear-gradient(135deg, var(--eim-blue-900) 0%, var(--eim-blue-600) 100%);

      /* Shadows / radii / spacing / type */
      --shadow-sm: 0 1px 2px rgba(0,0,0,.06);
      --shadow-md: 0 4px 10px rgba(0,0,0,.08);
      --shadow-lg: 0 12px 24px rgba(0,0,0,.10);
      --shadow-xl: 0 18px 36px rgba(0,0,0,.14);

      --radius-md: 10px; --radius-lg: 14px; --radius-xl: 18px; --radius-2xl: 22px; --radius-full: 9999px;

      --space-1:.25rem;--space-2:.5rem;--space-3:.75rem;--space-4:1rem;--space-5:1.25rem;--space-6:1.5rem;
      --space-8:2rem;--space-10:2.5rem;--space-12:3rem;--space-16:4rem;

      --font: 'Inter',system-ui,Segoe UI,Roboto,Arial,sans-serif;

      --transition-fast:150ms ease;--transition-normal:300ms ease;--transition-slow:500ms ease;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:var(--font);color:var(--secondary-900);background:#fff;line-height:1.6;min-height:100vh}

    /* Header */
    .header{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid var(--secondary-100);box-shadow:0 1px 2px rgba(0,0,0,.04)}
    .header-inner{max-width:1200px;margin:0 auto;padding:var(--space-6)}
    .header-inner{display:flex;align-items:center;justify-content:space-between}
    .logo{display:flex;align-items:center;gap:.75rem;color:var(--primary-600);font-weight:700;font-size:1.125rem}
    .logo-badge{width:96px;height:44px;border-radius:12px;background:var(--gradient-primary);display:flex;align-items:center;justify-content:center;overflow:hidden}

    /* Buttons */
    .btn{display:inline-flex;align-items:center;gap:.5rem;font-weight:600;border:none;border-radius:12px;padding:.6rem 1rem;cursor:pointer;transition:transform var(--transition-fast),box-shadow var(--transition-fast)}
    .btn i{font-size:.95em}
    .btn-primary{background:var(--gradient-primary);color:#fff;box-shadow:var(--shadow-md)}
    .btn-primary:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}
    .btn-ghost{background:#fff;border:1px solid var(--secondary-100);color:var(--secondary-700)}
    .btn-ghost:hover{background:var(--secondary-50)}

    /* Layout */
    .container{max-width:1200px;margin:0 auto;padding:var(--space-8) var(--space-6)}
    .hero{text-align:center;margin-bottom:var(--space-12)}
    .hero h1{font-size:2.4rem;color:var(--primary-600);margin-bottom:.5rem}
    .hero p{color:var(--secondary-600);font-size:1.1rem}

    /* Cards / Upload */
    .card{background:#fff;border:1px solid var(--secondary-100);border-radius:var(--radius-2xl);box-shadow:var(--shadow-md);padding:var(--space-12);position:relative;overflow:hidden}
    .card::before{content:"";position:absolute;inset:0 0 auto 0;height:4px;background:linear-gradient(90deg,var(--eim-blue-900),var(--eim-blue-500))}
    .drop{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;border:2px dashed var(--secondary-300);border-radius:var(--radius-xl);padding:3rem;background:#fbfdff;transition:all var(--transition-normal)}
    .drop:hover{border-color:var(--eim-blue-500);background:#f4f8fb}
    .drop.dragover{border-color:var(--primary-500);transform:scale(1.01)}
    .drop input{display:none}
    .upload-icon{width:84px;height:84px;border-radius:50%;background:var(--gradient-primary);display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:var(--shadow-lg)}
    .muted{color:var(--secondary-600);font-size:.925rem}

    .cv-preview{display:none;margin-top:1rem;border:1px solid var(--secondary-100);border-radius:16px;padding:1rem;background:#fff}
    .cv-preview.show{display:block;animation:fadeIn .35s ease}

    .start-wrap{text-align:center;margin-top:1rem}
    .start-btn{background:var(--gradient-primary);color:#fff;border:none;border-radius:14px;padding:.9rem 1.4rem;font-weight:700;box-shadow:var(--shadow-md);cursor:pointer;transition:all .25s}
    .start-btn:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}

    /* Home PDF */
    .pdf-viewer{margin-top:1rem;border:1px solid var(--secondary-100);border-radius:16px;overflow:hidden;background:#fff;box-shadow:var(--shadow-sm)}
    .pdf-viewer header{padding:.6rem .9rem;background:var(--secondary-50);border-bottom:1px solid var(--secondary-100);font-weight:600;color:var(--secondary-700)}
    .pdf-viewer iframe{width:100%;height:420px;border:0;display:block}

    /* Wizard */
    .wizard{max-width:1200px;margin:0 auto;border:1px solid var(--secondary-100);border-radius:22px;overflow:hidden;background:#fff;box-shadow:var(--shadow-lg);position:relative}
    .wiz-head{background:var(--gradient-surface);color:#fff;text-align:center;padding:2rem}
    .wiz-title{font-weight:800}
    .prog{display:flex;flex-wrap:wrap;gap:.6rem;justify-content:center;margin-top:1rem}
    .pill{padding:.45rem .7rem;border-radius:999px;background:rgba(255,255,255,.18);font-weight:600;font-size:.85rem;display:flex;gap:.45rem;align-items:center}
    .pill.active{background:rgba(255,255,255,.3)}
    .pill.done{background:#fff;color:var(--eim-blue-700)}

    .wiz-body{padding:1.5rem 1.5rem 0}
    .wiz-grid{display:grid;grid-template-columns:1.2fr 1.8fr;gap:1rem;align-items:start}
    .pdf-panel{position:sticky;top:86px;border:1px solid var(--secondary-100);border-radius:16px;overflow:hidden;background:#fff}
    .pdf-panel header{padding:.55rem .9rem;background:var(--secondary-50);border-bottom:1px solid var(--secondary-100);font-weight:600;color:var(--secondary-700)}
    .pdf-panel iframe{width:100%;height:60vh;border:0;display:block;background:#fff}

    .step{display:none;animation:fadeIn .35s ease}
    .step.active{display:block}
    .dots{display:flex;gap:.35rem;justify-content:center;margin-bottom:.9rem}
    .dot{width:12px;height:12px;border-radius:50%;background:var(--secondary-100)}
    .dot.active{background:var(--eim-blue-700)}
    .dot.done{background:var(--success-500)}

    .card h3{display:flex;gap:.6rem;align-items:center;color:var(--eim-blue-700);margin-bottom:.9rem}
    .criteria-list{list-style:none;display:flex;flex-direction:column;gap:.6rem}
    .criteria-item{border:1px solid var(--secondary-100);border-radius:12px;padding:.8rem;background:#fbfcfe}
    .criteria-item:hover{border-color:var(--eim-blue-300);background:#f2f6fb}
    .row{display:flex;flex-wrap:wrap;gap:.6rem;align-items:center;justify-content:space-between}
    .name{flex:1;min-width:200px;font-weight:600;color:var(--secondary-700)}
    .rating{border:1px solid var(--secondary-300);border-radius:10px;padding:.35rem .5rem;background:#fff}
    .icon-btn{width:36px;height:36px;border-radius:10px;border:1px solid var(--secondary-200);background:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer}
    .icon-btn:hover{background:var(--secondary-100)}
    .icon-btn.dislike.active{border-color:var(--error-600);color:var(--error-600);background:#fdeeee}
    .reason{display:none;margin-top:.6rem}
    .reason.show{display:block}
    .reason textarea{width:100%;min-height:80px;border:1px solid var(--secondary-300);border-radius:10px;padding:.6rem}

    .addbar{display:flex;gap:.6rem;align-items:center;border-top:1px solid var(--secondary-200);padding-top:.8rem;margin-top:.6rem}
    .addbar select{flex:1;border:1px solid var(--secondary-300);border-radius:10px;padding:.5rem;background:#fff}
    .add-btn{background:var(--gradient-primary);color:#fff;border:none;border-radius:10px;padding:.55rem .9rem;font-weight:700}

    .wiz-nav{display:flex;justify-content:space-between;align-items:center;border-top:1px solid var(--secondary-100);padding:1rem 1.5rem;background:#fafbfc}
    .wiz-btn{border:none;border-radius:12px;padding:.6rem 1rem;font-weight:700;display:inline-flex;gap:.5rem;align-items:center}
    .wiz-btn.primary{background:var(--gradient-primary);color:#fff}
    .wiz-btn.primary:hover{filter:saturate(1.05);transform:translateY(-1px)}
    .wiz-btn.secondary{background:#fff;border:1px solid var(--secondary-100);color:var(--secondary-700)}
    .wiz-btn:disabled{opacity:.55;cursor:not-allowed}

    /* Completion */
    .done{max-width:720px;margin:0 auto;border:1px solid var(--secondary-100);border-radius:22px;box-shadow:var(--shadow-lg);text-align:center}
    .done-body{padding:2.2rem}
    .tick{width:82px;height:82px;border-radius:50%;margin:0 auto 1rem;background:linear-gradient(135deg,#10b981,#059669);display:flex;align-items:center;justify-content:center;color:#fff;font-size:2rem}
    .upload-new{background:var(--gradient-primary);color:#fff;border:none;border-radius:14px;padding:.9rem 1.4rem;font-weight:800}

    /* Toast / misc */
    .toast{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);background:#111827;color:#fff;padding:.6rem .9rem;border-radius:12px;box-shadow:var(--shadow-md);z-index:9999}
    .hidden{display:none!important}

    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

    @media (max-width:1024px){
      .wiz-grid{grid-template-columns:1fr}
      .pdf-panel{position:relative;top:0}
      .pdf-panel iframe{height:48vh}
      .pdf-viewer iframe{height:380px}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <div class="logo">
        <div class="logo-badge">
          <img src="./logo.webp" alt="Logo" style="height:100%;object-fit:cover">
        </div>
        <span>AI Screening Platform</span>
      </div>
      <div>
        <button class="btn btn-ghost"><i class="fa-solid fa-download"></i> Export</button>
        <button class="btn btn-primary"><i class="fa-solid fa-gear"></i> Settings</button>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="hero">
      <h1>AI-Powered CV Screening</h1>
      <p>Upload a CV and walk through a clean, step-by-step analysis. Quit anytime or start over with a new upload.</p>
    </div>

    <!-- Upload -->
    <section id="sectionUpload">
      <div class="card">
        <label class="drop" id="dropLabel" for="fileInput">
          <div class="upload-icon"><i class="fa-solid fa-cloud-arrow-up"></i></div>
          <div style="font-weight:800">Drop your CV here or click to browse</div>
          <div class="muted">PDF, DOC or DOCX • up to 10MB</div>
          <div style="display:flex;gap:1rem;flex-wrap:wrap;justify-content:center;color:var(--secondary-700)">
            <span><i class="fa-solid fa-shield-halved" style="color:var(--success-600)"></i> Secure</span>
            <span><i class="fa-solid fa-bolt" style="color:var(--success-600)"></i> Fast</span>
            <span><i class="fa-solid fa-lock" style="color:var(--success-600)"></i> Private</span>
          </div>
          <input id="fileInput" type="file" accept=".pdf,.doc,.docx"/>
        </label>

        <div id="uploadSuccess" class="cv-preview" aria-live="polite">
          <div style="display:flex;gap:.8rem;align-items:center">
            <i class="fa-solid fa-circle-check" style="color:var(--success-600)"></i>
            <div>
              <div style="font-weight:700">File uploaded successfully</div>
              <div class="muted">Ready for AI analysis</div>
            </div>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:.6rem">
            <span id="fileName" style="font-weight:600"></span>
            <span id="fileMeta" class="muted"></span>
          </div>
        </div>

        <!-- Home PDF preview -->
        <div id="pdfViewerHome" class="pdf-viewer hidden" aria-hidden="true">
          <header><i class="fa-solid fa-file-pdf"></i> CV Preview</header>
          <iframe id="pdfFrameHome" title="Uploaded CV Preview (Home)"></iframe>
        </div>

        <div id="startWrap" class="start-wrap hidden">
          <button id="btnStart" class="start-btn"><i class="fa-solid fa-play"></i> Start CV Analysis</button>
        </div>
      </div>
    </section>

    <!-- Wizard -->
    <section id="wizardContainer" class="wizard hidden" aria-hidden="true">
      <button id="btnQuit" class="btn btn-ghost" style="position:absolute;right:14px;top:14px"><i class="fa-solid fa-xmark"></i> Quit</button>
      <div class="wiz-head">
        <h2 class="wiz-title">CV Analysis Wizard</h2>
        <div class="muted" style="color:rgba(255,255,255,.85)">Navigate with Previous / Next. Finish to complete.</div>
        <div class="prog">
          <div class="pill" id="pill1"><i class="fa-solid fa-upload"></i> Upload</div>
          <div class="pill" id="pill2"><i class="fa-solid fa-industry"></i> Industry</div>
          <div class="pill" id="pill3"><i class="fa-solid fa-briefcase"></i> Functions</div>
          <div class="pill" id="pill4"><i class="fa-solid fa-cogs"></i> Competences</div>
          <div class="pill" id="pill5"><i class="fa-solid fa-language"></i> Languages</div>
          <div class="pill" id="pill6"><i class="fa-solid fa-globe"></i> International</div>
          <div class="pill" id="pill7"><i class="fa-solid fa-graduation-cap"></i> Education</div>
        </div>
      </div>

      <div class="wiz-body">
        <div class="wiz-grid">
          <!-- Persistent PDF -->
          <aside class="pdf-panel" id="pdfPanelWizard">
            <header><i class="fa-solid fa-file-pdf"></i> CV Preview (in steps)</header>
            <iframe id="pdfFrameWizard" title="Uploaded CV Preview (Wizard)"></iframe>
          </aside>

          <!-- Steps -->
          <div>
            <div id="step1" class="step active">
              <div style="text-align:center;padding:2rem 0">
                <div style="width:48px;height:48px;border:4px solid #e5e7eb;border-top:4px solid var(--primary-500);border-radius:50%;margin:0 auto .6rem;animation:spin 1s linear infinite"></div>
                <h3>Analyzing your CV…</h3>
                <p class="muted">Extracting key info and preparing criteria.</p>
              </div>
            </div>

            <div id="step2" class="step">
              <div class="dots"><div class="dot done"></div><div class="dot active"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
              <div class="card">
                <h3><i class="fa-solid fa-industry"></i> Industry Knowledge</h3>
                <ul class="criteria-list" id="industryList">
                  <li class="criteria-item">
                    <div class="row">
                      <div class="name">N10 – Business economy (B2B services)</div>
                      <select class="rating">
                        <option value="">Rate…</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
                      </select>
                      <div style="display:flex;gap:.4rem">
                        <button class="icon-btn dislike" title="Dislike"><i class="fa-solid fa-thumbs-down"></i></button>
                        <button class="icon-btn delete" title="Delete"><i class="fa-solid fa-trash"></i></button>
                      </div>
                    </div>
                    <div class="reason"><textarea placeholder="Why is this not suitable?"></textarea></div>
                  </li>
                </ul>
                <div class="addbar">
                  <select id="industrySelect">
                    <option value="">Add new industry…</option>
                    <option>N20 – Renewable Energy</option>
                    <option>G15 – Software Development</option>
                  </select>
                  <button class="add-btn btn add-btn" data-target="industryList"><i class="fa-solid fa-plus"></i> Add</button>
                </div>
              </div>
            </div>

            <div id="step3" class="step">
              <div class="dots"><div class="dot done"></div><div class="dot done"></div><div class="dot active"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
              <div class="card">
                <h3><i class="fa-solid fa-briefcase"></i> Job Functions</h3>
                <ul class="criteria-list" id="functionsList">
                  <li class="criteria-item">
                    <div class="row">
                      <div class="name">110 CEO</div>
                      <select class="rating"><option value="">Rate…</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
                      <div style="display:flex;gap:.4rem">
                        <button class="icon-btn dislike"><i class="fa-solid fa-thumbs-down"></i></button>
                        <button class="icon-btn delete"><i class="fa-solid fa-trash"></i></button>
                      </div>
                    </div>
                    <div class="reason"><textarea placeholder="Why is this not suitable?"></textarea></div>
                  </li>
                </ul>
                <div class="addbar">
                  <select id="functionsSelect">
                    <option value="">Add new function…</option>
                    <option>220 Chief Technology Officer</option>
                    <option>330 Marketing Director</option>
                  </select>
                  <button class="add-btn btn" data-target="functionsList"><i class="fa-solid fa-plus"></i> Add</button>
                </div>
              </div>
            </div>

            <div id="step4" class="step">
              <div class="dots"><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot active"></div><div class="dot"></div><div class="dot"></div></div>
              <div class="card">
                <h3><i class="fa-solid fa-cogs"></i> Key Competences</h3>
                <ul class="criteria-list" id="competencesList">
                  <li class="criteria-item">
                    <div class="row">
                      <div class="name">0120 – Top line growth</div>
                      <div style="display:flex;gap:.4rem">
                        <button class="icon-btn dislike"><i class="fa-solid fa-thumbs-down"></i></button>
                        <button class="icon-btn delete"><i class="fa-solid fa-trash"></i></button>
                      </div>
                    </div>
                    <div class="reason"><textarea placeholder="Why is this not suitable?"></textarea></div>
                  </li>
                </ul>
                <div class="addbar">
                  <select id="competencesSelect">
                    <option value="">Add new competence…</option>
                    <option>0450 – Automation & Robotics</option>
                    <option>0850 – Risk Management</option>
                  </select>
                  <button class="add-btn btn" data-target="competencesList"><i class="fa-solid fa-plus"></i> Add</button>
                </div>
              </div>
            </div>

            <div id="step5" class="step">
              <div class="dots"><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot active"></div><div class="dot"></div></div>
              <div class="card">
                <h3><i class="fa-solid fa-language"></i> Language Skills</h3>
                <ul class="criteria-list" id="languageList">
                  <li class="criteria-item">
                    <div class="row">
                      <div class="name">English</div>
                      <select class="rating"><option value="">Rate…</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
                      <div style="display:flex;gap:.4rem">
                        <button class="icon-btn dislike"><i class="fa-solid fa-thumbs-down"></i></button>
                        <button class="icon-btn delete"><i class="fa-solid fa-trash"></i></button>
                      </div>
                    </div>
                    <div class="reason"><textarea placeholder="Why is this not suitable?"></textarea></div>
                  </li>
                </ul>
                <div class="addbar">
                  <select id="languageSelect">
                    <option value="">Add new language…</option>
                    <option>Spanish</option><option>French</option><option>Italian</option>
                  </select>
                  <button class="add-btn btn" data-target="languageList"><i class="fa-solid fa-plus"></i> Add</button>
                </div>
              </div>
            </div>

            <div id="step6" class="step">
              <div class="dots"><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot active"></div></div>
              <div class="card">
                <h3><i class="fa-solid fa-globe"></i> International Experience</h3>
                <ul class="criteria-list" id="internationalList">
                  <li class="criteria-item">
                    <div class="row">
                      <div class="name">Italy</div>
                      <div style="display:flex;gap:.4rem">
                        <button class="icon-btn dislike"><i class="fa-solid fa-thumbs-down"></i></button>
                        <button class="icon-btn delete"><i class="fa-solid fa-trash"></i></button>
                      </div>
                    </div>
                    <div class="reason"><textarea placeholder="Why is this not suitable?"></textarea></div>
                  </li>
                </ul>
                <div class="addbar">
                  <select id="internationalSelect">
                    <option value="">Add new country…</option>
                    <option>United Kingdom</option><option>United States</option><option>Japan</option>
                  </select>
                  <button class="add-btn btn" data-target="internationalList"><i class="fa-solid fa-plus"></i> Add</button>
                </div>
              </div>
            </div>

            <div id="step7" class="step">
              <div class="dots"><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div></div>
              <div class="card">
                <h3><i class="fa-solid fa-graduation-cap"></i> Education</h3>
                <ul class="criteria-list" id="educationList">
                  <li class="criteria-item">
                    <div class="row">
                      <div class="name">Master’s degree</div>
                      <div style="display:flex;gap:.4rem">
                        <button class="icon-btn dislike"><i class="fa-solid fa-thumbs-down"></i></button>
                        <button class="icon-btn delete"><i class="fa-solid fa-trash"></i></button>
                      </div>
                    </div>
                    <div class="reason"><textarea placeholder="Why is this not suitable?"></textarea></div>
                  </li>
                </ul>
                <div class="addbar">
                  <select id="educationSelect">
                    <option value="">Add new education…</option>
                    <option>PhD</option><option>Associate degree</option>
                  </select>
                  <button class="add-btn btn" data-target="educationList"><i class="fa-solid fa-plus"></i> Add</button>
                </div>
              </div>
            </div>
          </div><!-- /steps -->
        </div><!-- /grid -->
      </div>

      <div class="wiz-nav">
        <button id="btnPrev" class="wiz-btn secondary" disabled><i class="fa-solid fa-arrow-left"></i> Previous</button>
        <div class="muted"><span id="stepCounter">Step 1 of 7</span></div>
        <button id="btnNext" class="wiz-btn primary">Next <i class="fa-solid fa-arrow-right"></i></button>
      </div>
    </section>

    <!-- Completion -->
    <section id="completionSection" class="done hidden" aria-hidden="true">
      <div class="done-body">
        <div class="tick"><i class="fa-solid fa-check"></i></div>
        <h2 style="margin:6px 0 4px">Analysis Complete!</h2>
        <p class="muted">Your CV has been successfully analyzed and evaluated.</p>
        <button id="btnUploadNew" class="upload-new"><i class="fa-solid fa-upload"></i> Upload New CV</button>
      </div>
    </section>
  </main>

  <script>
    (function(){
      const sectionUpload = document.getElementById('sectionUpload');
      const fileInput = document.getElementById('fileInput');
      const dropLabel = document.getElementById('dropLabel');
      const uploadSuccess = document.getElementById('uploadSuccess');
      const fileNameEl = document.getElementById('fileName');
      const fileMetaEl = document.getElementById('fileMeta');
      const startWrap = document.getElementById('startWrap');
      const btnStart = document.getElementById('btnStart');

      const pdfViewerHome = document.getElementById('pdfViewerHome');
      const pdfFrameHome = document.getElementById('pdfFrameHome');
      const pdfPanelWizard = document.getElementById('pdfPanelWizard');
      const pdfFrameWizard = document.getElementById('pdfFrameWizard');

      const wizard = document.getElementById('wizardContainer');
      const btnQuit = document.getElementById('btnQuit');
      const btnPrev = document.getElementById('btnPrev');
      const btnNext = document.getElementById('btnNext');
      const stepCounter = document.getElementById('stepCounter');
      const completion = document.getElementById('completionSection');
      const btnUploadNew = document.getElementById('btnUploadNew');

      const steps = Array.from(document.querySelectorAll('.step'));
      const pills = [1,2,3,4,5,6,7].map(i => document.getElementById('pill'+i));

      let currentStep = 1;
      const totalSteps = 7;
      let objectUrl = null;

      const addPdfZoom = (url) => url + (url.includes('#') ? '&' : '#') + 'zoom=page-width';

      function show(el){ el.classList.remove('hidden'); el.setAttribute('aria-hidden','false'); }
      function hide(el){ el.classList.add('hidden'); el.setAttribute('aria-hidden','true'); }

      function resetPdf(){
        if(objectUrl){ try{ URL.revokeObjectURL(objectUrl); }catch(e){} objectUrl=null; }
        pdfFrameHome.removeAttribute('src'); pdfFrameWizard.removeAttribute('src');
        hide(pdfViewerHome); hide(pdfPanelWizard);
      }

      function resetToHome(){
        fileInput.value = '';
        uploadSuccess.classList.remove('show');
        startWrap.classList.add('hidden');
        resetPdf();
        hide(wizard); hide(completion); show(sectionUpload);
        setStep(1,true);
      }

      function validFile(file){
        const ok = ['pdf','doc','docx'];
        const ext = (file.name.split('.').pop()||'').toLowerCase();
        return ok.includes(ext);
      }
      function isPdf(file){
        const ext = (file.name.split('.').pop()||'').toLowerCase();
        return ext === 'pdf' || file.type === 'application/pdf';
      }
      function formatBytes(bytes){ return (bytes/1024/1024).toFixed(2)+' MB'; }

      function handleFile(file){
        if(!validFile(file)){ toast('Please upload a PDF, DOC or DOCX','error'); return; }
        fileNameEl.textContent = file.name;
        fileMetaEl.textContent = `${(file.name.split('.').pop()||'').toUpperCase()} • ${formatBytes(file.size)}`;
        uploadSuccess.classList.add('show');
        startWrap.classList.remove('hidden');

        resetPdf();
        if(isPdf(file)){
          objectUrl = URL.createObjectURL(file);
          const zoomed = addPdfZoom(objectUrl);
          pdfFrameHome.src = zoomed;
          pdfFrameWizard.src = zoomed;
          show(pdfViewerHome); show(pdfPanelWizard);
        }else{
          hide(pdfViewerHome); hide(pdfPanelWizard);
          toast('Preview not available for DOC/DOCX. Convert to PDF to preview.','error');
        }
      }

      function toast(msg,type='success'){
        const n=document.createElement('div'); n.className='toast';
        n.style.background = type==='error' ? '#991b1b' : '#111827';
        n.textContent = msg; document.body.appendChild(n);
        setTimeout(()=>n.remove(),2200);
      }

      // Upload events
      fileInput.addEventListener('change', e => { if(e.target.files?.length) handleFile(e.target.files[0]); });
      ['dragover','dragenter'].forEach(evt => dropLabel.addEventListener(evt, e => { e.preventDefault(); dropLabel.classList.add('dragover'); }));
      ['dragleave','drop'].forEach(evt => dropLabel.addEventListener(evt, e => { e.preventDefault(); dropLabel.classList.remove('dragover'); }));
      dropLabel.addEventListener('drop', e => { const f = e.dataTransfer?.files?.[0]; if(f) handleFile(f); });

      // Start
      btnStart.addEventListener('click', () => {
        hide(sectionUpload); show(wizard); setStep(1,true);
        setTimeout(()=> setStep(2), 1400);
      });

      btnPrev.addEventListener('click', ()=> { if(currentStep>1) setStep(currentStep-1); });
      btnNext.addEventListener('click', ()=> {
        if(currentStep<totalSteps) setStep(currentStep+1);
        else { hide(wizard); show(completion); toast('Analysis completed successfully'); }
      });
      btnQuit.addEventListener('click', resetToHome);
      btnUploadNew.addEventListener('click', ()=> { resetToHome(); sectionUpload.scrollIntoView({behavior:'smooth'}); });

      function setStep(n,force=false){
        if(n<1||n>totalSteps) return; if(!force && n===currentStep) return; currentStep=n;
        steps.forEach((el,i)=>el.classList.toggle('active', i===currentStep-1));
        pills.forEach((p,i)=>{ p.classList.remove('active','done'); if(i<currentStep-1) p.classList.add('done'); if(i===currentStep-1) p.classList.add('active'); });
        document.querySelectorAll('.step').forEach((s)=> {
          const dots=s.querySelectorAll('.dot'); dots.forEach((d,i)=>{ d.classList.toggle('done',i<currentStep-1); d.classList.toggle('active',i===currentStep-1); });
        });
        btnPrev.disabled = currentStep===1;
        btnNext.innerHTML = currentStep===totalSteps ? '<i class="fa-solid fa-check"></i> Complete' : 'Next <i class="fa-solid fa-arrow-right"></i>';
        stepCounter.textContent = `Step ${currentStep} of ${totalSteps}`;
      }

      // Criteria interactions
      document.addEventListener('click',(e)=>{
        const del = e.target.closest('.delete');
        const dis = e.target.closest('.dislike');
        const add = e.target.closest('.add-btn');

        if(del){ const li=del.closest('.criteria-item'); if(li){ li.style.opacity='0'; li.style.transform='translateX(-8px)'; setTimeout(()=>li.remove(),180);} }
        if(dis){ const li=dis.closest('.criteria-item'); dis.classList.toggle('active'); const box=li.querySelector('.reason'); if(box) box.classList.toggle('show',dis.classList.contains('active')); }
        if(add){
          const listId = add.getAttribute('data-target'); const select = add.previousElementSibling; const val = (select?.value||'').trim();
          if(!val){ toast('Please select a value','error'); return; }
          const list = document.getElementById(listId); if(!list) return;
          const needsRating = ['industryList','functionsList','languageList'].includes(listId);
          const li = document.createElement('li'); li.className='criteria-item';
          li.innerHTML = `
            <div class="row">
              <div class="name">${val}</div>
              ${needsRating?`<select class="rating"><option value="">Rate…</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>`:''}
              <div style="display:flex;gap:.4rem">
                <button class="icon-btn dislike" title="Dislike"><i class="fa-solid fa-thumbs-down"></i></button>
                <button class="icon-btn delete" title="Delete"><i class="fa-solid fa-trash"></i></button>
              </div>
            </div>
            <div class="reason"><textarea placeholder="Why is this not suitable?"></textarea></div>`;
          li.style.opacity='0'; li.style.transform='translateY(6px)'; list.appendChild(li);
          setTimeout(()=>{ li.style.transition='all .25s ease'; li.style.opacity='1'; li.style.transform='none'; }, 20);
          select.value=''; toast('Added');
        }
      });

      // init
      resetToHome();
      window.addEventListener('beforeunload', resetPdf);
    })();
  </script>
</body>
</html>